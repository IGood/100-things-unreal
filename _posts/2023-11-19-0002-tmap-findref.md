---
#layout: post
title:  "#2 - `TMap::FindRef`"
date:   2023-11-19 14:39:06 -0800
tags: tmap containers pointers
---
{% include post_header.html %}
When performing lookups in `TMap` whose value type is a pointer, prefer `FindRef` over `Contains` + `op[]`.\
The former will perform the lookup 1x, while the latter performs 2 lookups.

Also, because the value can be null even if the key exists, the result of `op[]` still needs to be checked in most cases.

```cpp
// 👍 write this
TMap<FGuid, TObjectPtr<UObject>> Buddies;
if (UObject* Buddy = Buddies.FindRef(Id))
{
    ...
}

// 👎 not that
TMap<FGuid, TObjectPtr<UObject>> Buddies;
if (Buddies.Contains(Id))
{
    if (UObject* Buddy = Buddies[Id])
    {
        ...
    }
}

// 👎 not that
TMap<FGuid, TObjectPtr<UObject>> Buddies;
if (TObjectPtr<UObject>* MaybeBuddy = Buddies.Find(Id))
{
    if (UObject* Buddy = *MaybeBuddy)
    {
        ...
    }
}
```
