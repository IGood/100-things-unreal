---
#layout: post
title:  "#2 - `TMap::FindRef`"
date:   2023-11-19 14:39:06 -0800
tags: tmap containers pointers
---
{% include post_header.html %}
When performing lookups in a `TMap` whose value type is a pointer (or pointer-like), consider `FindRef` over `Find` or `Contains` + `op[]`.

`TMap::FindRef` is a poorly named function that returns the value associated with the specified key, or the default value for the value type if the key isn't contained in the map.

- Compared to `Find`, it avoids awkward double pointer syntax.
- Compared to `Contains` + `op[]`, it performs the lookup 1x instead of 2x.

```cpp
// given...
UPROPERTY()
TMap<FGuid, TObjectPtr<UObject>> Buddies;

// 👍 write this:
if (UObject* Buddy = Buddies.FindRef(Id))
{
    ...
}

// 👎 not that:
if (TObjectPtr<UObject>* MaybeBuddy = Buddies.Find(Id))
{
    if (UObject* Buddy = *MaybeBuddy)
    {
        ...
    }
}

// 👎 not that:
if (Buddies.Contains(Id))
{
    if (UObject* Buddy = Buddies[Id])
    {
        ...
    }
}
```

Now, I understand that these aren't equivalent operations (hence the wording "consider" vs. "prefer").\
But it's often the case that what I want is simply, "Is it in the container & also not null?" - which is what I get from `FindRef`.
