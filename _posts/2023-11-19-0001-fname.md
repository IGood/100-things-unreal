---
#layout: post
title:  "#1 - String Things: `FName`"
date:   2023-11-19 14:39:06 -0800
tags: [fname, string things]
---
{% include post_header.html %}
Prefer `FName` over `FString` for case-insensitive strings that need to be compared at run time.

They use less memory & are faster to compare than `FString`.

---

Constructing a `FName` still isn't free.\
So for performance critial code, consider hoisting the creation of hard-coded values out of the hot code path.

```cpp
// 👍 write this:
static const FName NAME_Hello("hello");
if (SomeName == NAME_Hello) ...

// 👎 not that:
if (SomeName == "hello") ...
```

---

By default, creating a `FName` will add it to the global name table. If this isn't necessary, then `FNAME_Find` can be specified to avoid adding a new entry.\
I feel like this feature can generally be ignored, but if it's important to minimize the memory footprint of the name table, then it can be used when checking for values that might not exist.
```cpp
// Check if there's a special bone that should be used for this unique weapon.
// Something like... "LeftHand" -> "LeftHand_MiniCrossbow".
const FName SpecialBone(DefaultAttachBone.ToString() + TEXT("_") + MyWeapon.GetName(), FNAME_Find);
const FName AttachHere = (!SpecialBone.IsNone() && SkeletonHasBone(SpecialBone))
    ? SpecialBone
    : DefaultAttachBone;
```

---

**A Gotcha:**

"None" is a special value for `FName` & it can be created in many different ways.\
See <a href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Runtime/Core/Private/UObject/UnrealNames.cpp" target="_blank">UnrealNames.cpp</a> for tests that demonstrate all sorts of ways that "none" can be created such that we end up with a value where `SomeName.IsNone() == true`.

A `FName` created from an empty string is "none" & therefore will not `ToString` back to an empty string.
```cpp
FName X = "";
check(X.IsNone());
check(X.ToString() != TEXT(""));
check(X.ToString() == TEXT("None"));
```
